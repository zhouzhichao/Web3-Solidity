# Solidity 数据类型

  

Solidity 是一种静态类型语言，这意味着每个变量的类型在编译时就必须已经确定。Solidity 提供了多种基本数据类型，可以组合这些类型来形成复杂的数据结构。
  

## 1. 值类型（Value Types）

值类型总是在赋值或作为函数参数传递时被拷贝。
  

### 1.1 布尔类型（Booleans）

- **类型：** `bool`
  
- **可能值：** `true` 和 `false`
  
- **操作符：**
  - `!` (逻辑非)
    
  - `&&` (逻辑与)
    
  - `||` (逻辑或)
    
  - `==` (等于)
    
  - `!=` (不等于)
    

  

### 1.2 整数类型（Integers）

- **类型：** 有符号和无符号整数
  - 有符号整数：`int8` 到 `int256`，步长为 8
    
  - 无符号整数：`uint8` 到 `uint256`，步长为 8
    
  - `int` 和 `uint` 是 `int256` 和 `uint256` 的别名
    
- **操作符：**
  - 比较：`<=`, `<`, `==`, `!=`, `>=`, `>`
    
  - 位操作：`&`, `|`, `^` (异或), `~` (按位取反)
    
  - 移位：`<<` (左移), `>>` (右移)
    
  - 算术操作：`+`, `-`, `*`, `/`, `%` (取模), `**` (幂运算)
    

  

### 1.3 地址类型（Address）

- **类型：** `address` 和 `address payable`
  - `address`：20 字节的以太坊地址
    
  - `address payable`：可以接收以太币的地址
    
- **操作符：** `<=`, `<`, `==`, `!=`, `>=`, `>`
  
- **成员函数：**
  - `balance`：查询地址的余额
    
  - `transfer`：发送以太币，失败则抛出异常
    
  - `send`：发送以太币，失败返回 `false`
    

  

### 1.4 固定字节数组（Fixed-size Byte Arrays）

- **类型：** `bytes1` 到 `bytes32`
  
- **操作符：**
  - 比较：`<=`, `<`, `==`, `!=`, `>=`, `>`
    
  - 位操作：`&`, `|`, `^`, `~`
    
  - 移位：`<<`, `>>`
    

  

### 1.5 枚举类型（Enums）

- 枚举允许定义用户自定义类型，指定一组常量值。
  

  

```Solidity
enum Status { Pending, Shipped, Delivered }
```

## 2. 引用类型（Reference Types）

引用类型的数据通过引用传递，因此它们的赋值行为不同于值类型。

### 2.1 数组（Arrays）

- **类型：**
  - 固定长度数组：`int[5]`
    
  - 动态数组：`int[]`
    
- **成员函数：**
  - `push()`：向动态数组中添加元素
    
  - `pop()`：从动态数组中移除最后一个元素
    
  - `length`：获取数组长度
    

### 2.2 字节数组（Bytes and Strings）

- **类型：**
  - `bytes`：动态大小的字节数组
    
  - `string`：动态大小的 UTF-8 编码字符串
    
- **成员函数：**
  - `length`：获取数组或字符串的长度
    
- **注意：** `string` 和 `bytes` 均为动态数组，但 `bytes` 更高效，因为它没有特殊的字符编码限制。
  

### 2.3 结构体（Structs）

- 结构体允许将多个变量组合在一起，形成一个新的类型。
  

```Plain
struct Person {    string name;    uint age;}
```

### 2.4 映射（Mappings）

- **类型：** `mapping(keyType => valueType)`
  - 例如：`mapping(address => uint)`
    
- 映射是引用类型，不能通过遍历获取键值对。
  

---

## 3. 函数类型（Function Types）

- **类型：**
  - 内部函数：只能在合约内部调用
    
  - 外部函数：可以从外部调用
    
- **声明：**
  - `function (uint, uint) internal returns (uint)`
    
  - `function (uint, uint) external returns (uint)`
    

---

## 4. 用户定义类型（User-defined Value Types）

用户可以创建新的值类型：

```Plain
type MyInt is int256;
```

  

---

## 5. 常量和不可变变量

- **常量 (****`constant`****)**：在编译时定义，不能修改。
  
- **不可变变量 (****`immutable`****)**：在构造函数中初始化后不能修改。
  

---

## 6. 数据位置（Data Location）

- **存储（storage）：** 持久化存储在区块链上
  
- **内存****（memory）：** 仅在函数调用期间存在
  
- **堆栈（stack）：** 临时变量的存储位置，大小有限
  

---

## 7. 特殊类型

- **`address payable`**：允许接受以太币的地址。
  
- **`contract`**：每个合约定义其自己的类型，可以隐式转换为继承的合约类型。
  

  

### 总结：

Solidity 提供了多种基本类型和复杂类型，帮助开发者灵活地定义和操作智能合约中的数据。